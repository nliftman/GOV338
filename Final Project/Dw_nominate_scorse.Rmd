---
title: "DW-NOMINATE scores"
author: "Naomi Liftman"
date: "2023-04-21"
output: pdf_document
---
# Load Pacakges
```{r warning = FALSE, error = FALSE, message = FALSE}
library(tidyverse)
library(rio)
library(stringi)                               
```

# 117th 
```{r}
#import the data
dw_117 <- import("/Users/naomiliftman/Desktop/GOV338/Final Project/HS117_members.csv")

#select only the ones we want
dw_117 <- dw_117 %>% 
  select(chamber, icpsr, state_abbrev, party_code, bioname, nominate_dim1, )

#remove presidents 
dw_117 <- dw_117[dw_117$chamber != "President", ] 
```

# God so much mutating and fixing the names
```{r}
#making a dataset to fuck around with 
dw_117_mutating <- dw_117

#removing all the ending intials 
dw_117_mutating$bioname <- gsub("(.*)\\s+[A-Z]\\.?$", "\\1", dw_117_mutating$bioname)

#making it all lower case
dw_117_mutating$bioname <- tolower(dw_117_mutating$bioname)

#add new columns with the first and last names
dw_117_mutating$firstname <- gsub(".*\\, ", "", dw_117_mutating$bioname)   
dw_117_mutating$lastname <- gsub("\\,.*","", dw_117_mutating$bioname)

#now making the names caps of first name and last
dw_117_mutating$firstname <- stri_trans_totitle(dw_117_mutating$firstname) 
dw_117_mutating$lastname <- stri_trans_totitle(dw_117_mutating$lastname)                      

#combining them to get their full names!
full_117_names = dw_117_mutating %>% 
  unite(name, c(firstname, lastname), sep = " ", remove = FALSE) %>% 
  select(chamber:name, -bioname)

```

# Religion 117th
```{r}
#doing this so that we can have the correct numbers and they are all the same
#there are 531
#importing the df 
religion_117 <- import("/Users/naomiliftman/Desktop/GOV338/Final Project/117congress.xlsx")

#rename the last five names
relig_117 <- religion_117 %>% 
    rename_with(~ tolower(gsub(".", "", .x, fixed = TRUE))) %>%
  rename("type" = 2) %>% 
  rename("name" = 3) %>% 
  rename("party" = 4 ) %>% 
  rename("cont" = 5) %>% 
  rename("religion" = 6)

#remove first row
relig_117 <- relig_117[-c(1:1), ]

#only want name and religion
relig_117 <- relig_117 %>% 
  select("name", "religion")

#creating a new 117
rel_117 <- relig_117 %>% 
  drop_na(name)

#fix all protestant:
rel_117$fix_relig <- ifelse(rel_117$religion == 'Adventist', 'Protestant', rel_117$religion)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Baptist', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Congregationalist', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Episcopalian', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Lutheran', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Methodist', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Pentecostal', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Pietist', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Presbyterian', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Protestant unspecified', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Reformed', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Restorationist', 'Protestant', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Unitarian Universalist', 'Protestant', rel_117$fix_relig)

#fix all general catholic
rel_117$fix_relig <- ifelse(rel_117$religion == 'Orthodox', 'Catholic', rel_117$fix_relig)

#fixing all other
rel_117$fix_relig <- ifelse(rel_117$religion == 'Unaffiliated', 'Other', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Buddhist', 'Other', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Hindu', 'Other', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Mormon', 'Other', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Muslim', 'Other', rel_117$fix_relig)
rel_117$fix_relig <- ifelse(rel_117$religion == 'Nondenominational', 'Other', rel_117$fix_relig)

#replacing all of the NAs with Unknown along with the dont know
rel_117$fix_relig <- ifelse(rel_117$religion == 'Don\'t know/refused', 'Unknown', rel_117$fix_relig)
rel_117$fix_relig <- rel_117$fix_relig %>% replace_na('Unknown')


rel_117 <- rel_117 %>% 
  select("name", "fix_relig") %>% 
  drop_na("name")
```

# Fixing the names that didnt merge correctly
```{r}
full_117_names[full_117_names == "Iii Manchin"] <- "Joe Manchin III"
full_117_names[full_117_names == "Donald Edwin Young"] <- "Don Young"
full_117_names[full_117_names == "Daniel Scott Sullivan"] <- "Dan Sullivan"
full_117_names[full_117_names == "Mike Dennis Rogers"] <- "Mike D. Rogers"
full_117_names[full_117_names == "Robert Aderholt"] <- "Robert B. Aderholt"
full_117_names[full_117_names == "Gary James Palmer"] <- "Gary Palmer"
full_117_names[full_117_names == "Terri Sewell"] <- "Terri A. Sewell"
full_117_names[full_117_names == "Richard Shelby"] <- "Richard C. Shelby"
full_117_names[full_117_names == "Thomas Hawley (Tommy) Tuberville"] <- "Tommy Tuberville"
full_117_names[full_117_names == "Bruce Eugene Westerman"] <- "Bruce Westerman"
full_117_names[full_117_names == "Thomas O'halleran"] <- "Tom O'halleran"
full_117_names[full_117_names == "Raúl Grijalva"] <- "Raul M. Grijalva"
full_117_names[full_117_names == "Andrew Biggs"] <- "Andy Biggs"
full_117_names[full_117_names == "Mark Edward Kelly"] <- "Mark Kelly"
full_117_names[full_117_names == "Doug Lamalfa"] <- "Doug LaMalfa"
full_117_names[full_117_names == "Tom Mcclintock"] <- "Tom McClintock"
full_117_names[full_117_names == "Michael Thompson"] <- "Mike Thompson"
full_117_names[full_117_names == "Jerry Mcnerney"] <- "Jerry McNerney"
full_117_names[full_117_names == "Mark James Desaulnier"] <- "Mark DeSaulnier"
full_117_names[full_117_names == "Karen Lorraine Jacqueline (Jackie) Speier"] <- "Jackie Speir"
full_117_names[full_117_names == "Rohit Khanna"] <- "Ro Khanna"
full_117_names[full_117_names == "Anna Georges Eshoo"] <- "Anna G. Eshoo"
full_117_names[full_117_names == "James Varni Panetta"] <- "Jimmy Panetta"
full_117_names[full_117_names == "Kevin Mccarthy"] <- "Kevin McCarthy"
full_117_names[full_117_names == "Adam Schiff"] <- "Adam B. Schiff"
full_117_names[full_117_names == "Tony Cárdenas"] <- "Tony Cardenas"
full_117_names[full_117_names == "Peter Rey Aguilar"] <- "Pete Aguilar"
full_117_names[full_117_names == "Grace Flores Napolitano"] <- "Grace F. Napolitano"
full_117_names[full_117_names == "Norma Judith Torres"] <- "Norma J. Torres"
full_117_names[full_117_names == "Linda Sánchez"] <- "Linda T. Sanchez"
full_117_names[full_117_names == "Nanette Diaz Barragán"] <- "Nanette Barragan"
full_117_names[full_117_names == "Jose Luis Correa"] <- "Lou Correa"
full_117_names[full_117_names == "Juan Vargas"] <- "Juan C. Vargas"
full_117_names[full_117_names == "Kamala Devi Harris"] <- "Kamala Harris"
full_117_names[full_117_names == "Diana Degette"] <- "Diana DeGette"
full_117_names[full_117_names == "Joseph Neguse"] <- "Joe Neguse"
full_117_names[full_117_names == "Kenneth Robert Buck"] <- "Ken Buck"
full_117_names[full_117_names == "John Wright Hickenlooper"] <- "John Hickenlooper"
full_117_names[full_117_names == "John Larson"] <- "John B. Larson"
full_117_names[full_117_names == "Rosa Delauro"] <- "Rosa DeLauro"
full_117_names[full_117_names == "James Himes"] <- "Jim Himes"
full_117_names[full_117_names == "Christopher Murphy"] <- "Christopher S. Murphy"
full_117_names[full_117_names == "Thomas Richard Carper"] <- "Thomas R. Carper"
full_117_names[full_117_names == "Christopher Coons"] <- "Chris Coons"
full_117_names[full_117_names == "Matthew L. Ii Gaetz"] <- "Matt Gaetz"
full_117_names[full_117_names == "Neal Patrick Dunn"] <- "Neal Dunn"
full_117_names[full_117_names == "John Henry Rutherford"] <- "John Rutherford"
full_117_names[full_117_names == "Alfred Jr. Lawson"] <- "Al Lawson"
full_117_names[full_117_names == "Darren Michael Soto"] <- "Darren Soto"
full_117_names[full_117_names == "Valdez Butler Demings"] <- "Val B. Demings"
full_117_names[full_117_names == "Charlie Joseph Jr. Crist"] <- "Charlie Crist"
full_117_names[full_117_names == "C. Scott Franklin"] <- "Scott Franklin"
full_117_names[full_117_names == "Vernon Buchanan"] <- "Vern Buchanan"
full_117_names[full_117_names == "William Steube"] <- "Greg Steube"
full_117_names[full_117_names == "Brian Jeffery Mast"] <- "Brian Mast"
full_117_names[full_117_names == "Alcee Lamar Hastings"] <- "Alcee L. Hastings"
full_117_names[full_117_names == "Theodore E. (Ted) Deutch"] <- "Ted Deutch"
full_117_names[full_117_names == "Frederica Wilson"] <- "Frederica S. Wilson"
full_117_names[full_117_names == "Richard Lynn (Rick) Scott"] <- "Rick Scott"
full_117_names[full_117_names == "Buddy Carter"] <- "Earl L. \"Buddy\" Carter"
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
full_117_names[full_117_names == ""] <- ""
```



# Merge 117th Relgion and DW nominate
```{r}
#initial merge so we can see which ones are mismatched
hopes_and_prayers <- rel_117 %>% 
  full_join(full_117_names, rel_117, by = "name")

pp <- hopes_and_prayers %>% 
  filter(is.na(chamber))
```





